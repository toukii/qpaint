<html>
<head>
    <title>QPaint (by Qiniu.com)</title>
</head>
<body>
<style>
#drawing{
	border:1px solid lightgray;
}
/*.drawLoc{
	position: fixed;
	top: 100;
	left: 100;
}*/
.rawImg{
	position: fixed;
	top: 120;
	left: 150;
}
body {
    background: #fafafa;
}
svg {
    /*troke: none;
    fill: none;
    display: none;*/
    position: absolute;
    /*position: fixed;*/
    top: 100;
	left: 50;
}
canvas{
    position: fixed;
    /*display: block;*/
    /*margin: -100px -100px;*/
    top: 100;
	left: 50;
}
</style>
<div id="menu"></div><br>
<img class="rawImg" width="418" height="418" src="tgrpc.png">
<svg id="svg" width="900" height="500" viewBox="0 0 900 500">
    <path id="bezier-path" d="" stroke="green" stroke-width="4" fill="none" />
</svg>
<canvas id="drawing" class="drawLoc" width="900" height="500">你的浏览器不支持Canvas！</canvas>
<script>
	/*
	绘制图片
		图片预加载，获取图片文件
		onload中调用
		drawImage(img,x,y,w,h);绘制图片(图片,坐标x,坐标y,宽度,高度)
	*/
	// var drawing = document.getElementById("drawing");	
	// var cxt = drawing.getContext("2d");
	
	var imgs = new Image();
	imgs.src = "tgrpc.png";
	console.log(imgs.width,imgs.height);
	var svg =  document.getElementById("svg")
	// //方法一：存在部分不兼容
	// imgs.onload = drawImg;//图片加载完成再执行
	// function drawImg(){
	// 	// cxt.drawImage(imgs,0,0,drawing.width,drawing.height);
	// 	cxt.drawImage(imgs,0,0,imgs.width,imgs.height);
	// }

	// //方法二:
	// // imgs.onload = createPat;//图片加载完成再执行
	// function createPat(){
	// 	var bg = cxt.createPattern(imgs,"no-repeat");
	// 	cxt.fillStyle = bg;
	// 	cxt.fillRect(0,0,drawing.width,drawing.height);
	// }

// window.onload = function () {
// 	var ctx = document.getElementById("drawing").getContext('2d');
// 	//https://developer.mozilla.org/en-US/docs/XMLSerializer
// 	var svg_xml = (new XMLSerializer()).serializeToString(svg);
// 	var img = new Image();
// 	//https://developer.mozilla.org/en-US/docs/DOM/window.btoa
// 	console.log(window.btoa(svg_xml));
// 	img.src = "data:image/svg+xml;base64," + window.btoa(svg_xml);

// 	//也可以直接写
// 	//img.src = "data:image/svg+xml;base64," + window.btoa(document.getElementById("td1").innerHTML);

// 	img.onload = function () {
// 	    //drawImage 可以用HTMLImageElement，HTMLCanvasElement或者HTMLVideoElement作为参数
// 	    ctx.drawImage(img, 0, 0);
// 	};
// }

</script>
<script src="dom.js"></script>
<script src="view.js"></script>
<script src="creator/path.js?v=7"></script>
<script src="creator/freepath.js?v=7"></script>
<script src="creator/rect.js?v=7"></script>
<script src="accel/select.js"></script>
<script src="accel/menu.js"></script>
</body>
</html>